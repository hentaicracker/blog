---
title: 使用 Docker 搭建开发环境
date: 2021-02-23 10:13:12
tags:
    - Docker
---

最近在工作中遇到了一些麻烦的环境问题：在安装 [opencv4nodejs](https://github.com/justadudewhohacks/opencv4nodejs) 这个 `npm` 包时老是安装不成功，主要问题是该包依赖 `OpenCV` 这个基于 `C++` 的图像处理库，并且 `OpenCV` 依赖了一些更底层的 `C` 相关的编译库，另外安装这个包时还要编译 `Node.js addon`，如果当前系统里有相应工具链版本不支持的情况就会失败。

谷歌了很多解决办法，最后依旧无效，在弹尽粮绝之时，索性换了一种思路来解决这个问题：使用 `Docker` 跑该服务。`Docker` 天然就是为了抹平环境差异而生的，并且可以模拟生产环境，用它来跑开发环境是一个非常不错的选择。

## 场景分析

当前的业务场景是：通过 `opencv4nodejs` 借助 `OpenCV` 的图像处理能力输出一个图像对比 `Node.js` 服务。需要考虑的几个问题有：

1. docker 起的服务需要暴露端口给到本地应用访问；
2. 本地源文件实时修改能映射到 docker 容器中去并重启服务；
3. 

